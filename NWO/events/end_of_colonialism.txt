# variable end_of_colonialism desidec where we are in the decolonlialization process
# 1- = asia
# 3- = north africa
# 4- = africa (exept: south africa)
# 5- = south africa and oceania
# 6- = all
country_event = {
  id = 8212000
  title = EVT_8212000_NAME
  desc = EVT_8212000_DESC
  picture = "nwo2_federated_indonesia"
  fire_only_once = yes

  trigger = { 
	has_global_flag = federated_indonesia 
	NOT = { has_global_flag = colonialism_indonesia } 
	tag = NET
  }

  mean_time_to_happen = { months = 12 }
  
  option = {
    name = EVT_8212000_A
    change_variable = {
		which = end_of_colonialism
		value = -1
	}
	random_country = { limit = { has_global_flag = federated_indonesia } set_global_flag = colonialism_indonesia }
	
  }
}
country_event = { # Our control over the Empire weakens
  id = 8212001
  title = EVT_8212001_NAME
  desc = EVT_8212001_DESC
  picture = "nwo2_colonialism"
  
  trigger = { 
	OR = {
		AND = { tag = ENG exists = HND NOT = { has_global_flag = end_colonialism_india } year = 1950 }
		AND = { tag = NET NET = { NOT = { owns = 1413 } } NOT = { has_global_flag = end_colonialism_indonesia } year = 1952 }#Djakarta
		AND = { tag = FRA exists = ALG ALG = { NOT= { government = nationalist_dictatorship } } NOT = { has_global_flag = end_colonialism_northafrica }  year = 1958 }
		AND = { tag = FRA exists = GUI GUI = { is_vassal = no } NOT = { has_global_flag = end_colonialism_africa }  year = 1958 }
		AND = { tag = ENG exists = GHA GHA = { is_vassal = no } NOT = { has_global_flag = end_colonialism_africa }  year = 1960 }
		AND = { tag = POR exists = MOZ MOZ = { is_vassal = no } NOT = { has_global_flag = end_colonialism_southafrica }  year = 1972 }
	}
  }

  mean_time_to_happen = { months = 12 }
  
  option = {
    name = EVT_8212001_A
    change_variable = {
		which = end_of_colonialism
		value = 1
	}
	random_country = { limit = { tag = THIS exists = HND } set_global_flag = end_colonialism_india }
	random_country = { limit = { NET = { NOT = { owns = 1413 } } } set_global_flag = end_colonialism_indonesia }
	random_country = { limit = { tag = THIS exists = ALG } set_global_flag = end_colonialism_northafrica }
	random_country = { limit = { tag = THIS exists = GUI } set_global_flag = end_colonialism_africa }
	random_country = { limit = { tag = THIS exists = GHA } set_global_flag = end_colonialism_africa }
	random_country = { limit = { tag = THIS exists = MOZ } set_global_flag = end_colonialism_southafrica }
  }

}

province_event = { # Colonial unrest in $PROVINCENAME$
 id = 8212003
  title = EVT_COLONIALUNREST_NAME
  desc = EVT_COLONIALUNREST_DESC
  picture = "colonial_unrest"

  trigger = {
	is_overseas = yes
	is_colonial = yes
	OR = { 
		has_province_modifier = colonial_unrest 
		is_coastal = yes
		any_neighbor_province = { has_province_modifier = colonial_unrest } 
    }
  }

  mean_time_to_happen = { months = 120 }

  option = {
    name = EVT_COLONIALUNREST_SUPPRESS
	any_pop = { limit = { is_accepted_culture = no is_primary_culture = no } consciousness = 1 militancy = 0.5 }
	add_province_modifier = { name = colonial_unrest duration = -1 }
	ai_chance = { factor = 1 modifier = { factor = 100 owner = { NOT = { government = democracy government = hms_government } } } }
  }

  option = {
    name = EVT_COLONIALUNREST_PROMISE
	any_pop = { limit = { is_accepted_culture = no is_primary_culture = no } consciousness = 0.5 }
	add_province_modifier = { name = colonial_promise duration = -1 }
	add_province_modifier = { name = colonial_dry_spell duration = 3500 }
	ai_chance = { factor = 10 }
  }
}

province_event = { # Colonials in $PROVINCENAME$ accuses us of breaking promises
 id = 8212004
  title = EVT_COLONIAL_PROMISE_BROKEN_NAME 
  desc = EVT_COLONIAL_PROMISE_BROKEN_DESC
  picture = "colonial_unrest"

  trigger = {
	has_province_modifier = colonial_promise 
	NOT = { has_province_modifier = colonial_dry_spell }
  }

  mean_time_to_happen = { months = 1  }

  option = {
    name = EVT_COLONIAL_PROMISE_BROKEN_A
	any_pop = { limit = { is_accepted_culture = no is_primary_culture = no } consciousness = 1 militancy = 1.0 }
	add_province_modifier = { name = colonial_unrest duration = -1 }
	remove_province_modifier = colonial_promise 
  }
}
country_event = {
  id = 8212005
  title = EVT_DEMAND_INDEPENDENCE_NAME
  desc = EVT_INDEPENDENCE_DESC
  picture = "colonialism_end"

  trigger = {
	exists = no
	OR = { 
		AND = { any_core = { OR = { has_province_modifier = colonial_unrest has_province_modifier = colonial_promise } is_colonial = yes continent = asia } check_variable = { which = end_of_colonialism value = 1 } } 
		AND = { any_core = { OR = { has_province_modifier = colonial_unrest has_province_modifier = colonial_promise } is_colonial = yes continent = mena } check_variable = { which = end_of_colonialism value = 3 } }
		AND = { any_core = { OR = { has_province_modifier = colonial_unrest has_province_modifier = colonial_promise } is_colonial = yes is_overseas = yes continent = africa NOT = { owned_by = SAF } NOT = { OR = { is_core = MOZ is_core = ZIM is_core = ZAM is_core = MLW is_core = ANG } } } check_variable = { which = end_of_colonialism value = 4 } }
		AND = { any_core = { OR = { has_province_modifier = colonial_unrest has_province_modifier = colonial_promise } is_colonial = yes OR = { continent = oceania continent = africa } } check_variable = { which = end_of_colonialism value = 5 } } 
	}
  }
  
  mean_time_to_happen = { months = 12 }

  option = {
    name = EVT_DEMAND_INDEPENDENCE_A
	random_country = {  limit = { any_owned_province = {is_core = THIS } } country_event = 8212006 }
  }
}
country_event = {
  id = 8212006
  title = EVT_INDEPENDENCE_NAME
  desc = EVT_INDEPENDENCE_DESC
  picture = "colonialism_self_rule"
  is_triggered_only = yes

  option = {
    name = EVT_LIBERATE
	FROM = { 
		release_vassal = THIS 
		diplomatic_influence = { who = THIS value = 200 }
	}
	government = hms_government country_event = 800054
	any_owned = { remove_province_modifier = colonial_promise remove_province_modifier = colonial_unrest  }
	# note: we do not reduce militancy so a country that have had a very violent liberation 
	# tend to remains violent at its core
	set_country_flag = full_independance
	ai_chance = { factor = 100 }
  }
  option = {
    name = EVT_DONTLIBERATE
	any_owned = {  
		limit = { is_core = FROM } 
		any_pop = { 
			limit = { is_accepted_culture = no is_primary_culture = no }
			militancy = 1.0 
			consciousness = 1
		}
	}
	ai_chance = { factor = 0 }
  }
}
country_event = {
  id = 8212008
  title = EVT_FULLINDEPENDENCE_NAME
  desc = EVT_FULLINDEPENDENCE_DESC
  picture = "colonialism_end"

  trigger = {
	has_country_flag = full_independance
	NOT = { ruling_party_ideology = conservative }
    is_vassal = yes
  }

  mean_time_to_happen = { months = 12 }

  option = {
    name = EVT_FULLINDEPENDENCE_A
	government = democracy country_event = 800054
	overlord = { country_event = 8212009 }
	clr_country_flag = full_independance
  }
}
country_event = {
  id = 8212009
  title = EVT_FULLINDEPENDENCE_OVERLOARD_NAME
  desc = EVT_FULLINDEPENDENCE_DESC
  picture = "colonialism_end"
  is_triggered_only = yes

  option = {
    name = EVT_FULLINDEPENDENCE_A
	release_vassal = FROM 
	end_military_access = FROM 
	prestige = -5
	ai_chance = { factor = 100 }
  }
  option = {
    name = EVT_FULLINDEPENDENCE_B
	release_vassal = FROM 
	end_military_access = FROM 
	badboy = 5
	prestige = -5
	casus_belli = { target = FROM type = make_puppet months = 24 }
	ai_chance = { factor = 0 }
  }
  
}
country_event = {
  id = 8212010
  title = EVT_FULLINDEPENDENCE_NAME
  desc = EVT_FULLINDEPENDENCE_DESC
  picture = "colonialism_end"
  is_triggered_only = yes

  option = {
    name = EVT_FULLINDEPENDENCE_A
	any_country = { limit = { THIS = { exists = no } tag = FROM } release = THIS } # Incorrect Validator Warning 
	any_country = { limit = { is_our_vassal = THIS tag = FROM } release_vassal = THIS }
	any_greater_power = { limit = { tag = FROM } diplomatic_influence = { who = THIS value = 200 } }
  }
}

country_event = {
	id = 15500
	title = "EVTNAME15500" # demand_autonomy
	desc = "EVTDESC15500"
	picture = "demand_autonomy"
	
	trigger = {
		any_owned_province = { 
			is_primary_culture = no
			is_accepted_culture = no
			controlled_by = owner
			OR = {
				owner = { has_country_modifier = sectarian_divide }
				minorities_reform = minorities_equal_rights
				is_colonial = yes
			}
			has_national_minority = yes
			any_core = { NOT = { tag = THIS } }
		}
	}
	
	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.5
			any_owned_province = {
				has_province_modifier = promised_autonomy
			}
		}
		modifier = {
			factor = 0.8
			any_owned_province = {
				state_scope = { flashpoint_tension  = 10 }
			}
		}
		# a dominating primary culture makes us more likely to request autonomy
		modifier = {
			factor = 0.5
			capital_scope = {
				is_primary_culture = yes
			}
		}
		# a dominating majority primary culture makes us even more likely to request autonomy
		#modifier = {
		#	factor = 0.5
		#	is_primary_culture = no
		#}
		modifier = {
			factor = 0.9
			average_militancy = 5
		}
		modifier = {
			factor = 0.9
			average_consciousness = 5
		}
		modifier = {
			factor = 1.5
			NOT = {
				AND = {
					average_consciousness = 5
					average_militancy = 5
				}
			}
		}
		modifier = {
			factor = 1.5
			NOT = { age_of_protests = 1 }
		}
		modifier = {
			factor = 4
			NOT = { minorities_reform = minorities_equal_rights }
		}
	}
	
	option = {
		name = "EVTOPTA15500"		#Deny Autonomy
		any_owned = { 
			limit = {
				is_primary_culture = no
				is_accepted_culture = no
				controlled_by = owner
				OR = {
					owner = { has_country_modifier = sectarian_divide }
					minorities_reform = minorities_equal_rights
				}
				has_national_minority = yes
				any_core = { NOT = { tag = THIS } }
			}
			any_pop = {
				militancy = 5
				consciousness = 5
			}
		}
		add_country_modifier = { name = denied_independence duration = 1080 }
		ai_chance = { factor = 1 modifier = { minorities_reform = minorities_equal_rights factor = 0 } }
	}
	option = {
		name = "EVTOPTB15500"		# Promised autonomy
		any_owned = { 
			limit = {
				is_primary_culture = no
				is_accepted_culture = no
				controlled_by = owner
				OR = {
					owner = { has_country_modifier = sectarian_divide }
					minorities_reform = minorities_equal_rights
				}
				has_national_minority = yes
				any_core = { NOT = { tag = THIS } }
			}
			any_pop = {
				militancy = -2
				consciousness = 2
			}
			add_province_modifier = { name = promised_autonomy duration = 1800 }
		}
		ai_chance = { factor = 1 modifier = { NOT = { minorities_reform = minorities_equal_rights } factor = 0  } }
	}
}

country_event = {
	id = 15501
	title = "EVTNAME15501"
	desc = "EVTDESC15501"
	picture = "deny_autonomy"
	
	trigger = {
		any_owned_province = { has_province_modifier = promised_autonomy }
		NOT = { has_country_modifier = denied_independence }
	}
	
	mean_time_to_happen = {
		months = 120
		# a dominating primary culture makes us more likely to request autonomy
		modifier = {
			factor = 0.5
			capital_scope = {
				is_primary_culture = yes
			}
		}
		modifier = {
			factor = 0.9
			average_militancy = 5
		}
		modifier = {
			factor = 0.9
			average_consciousness = 5
		}
		modifier = {
			factor = 1.5
			NOT = {
				AND = {
					average_consciousness = 5
					average_militancy = 5
				}
			}
		}
		modifier = {
			factor = 1.5
			NOT = { age_of_protests = 1 }
		}
		modifier = {
			factor = 4
			NOT = { minorities_reform = minorities_equal_rights }
		}
	}	
	
	option = {
		name = "EVTOPTA15501"		#Accept
        any_country = {
			limit = { 
				any_core = { 
					owned_by = THIS 
					has_province_modifier = promised_autonomy
				} 
				NOT = { tag = THIS }
			}
            country_event = 15502
		}		
		ai_chance = { factor = 1 modifier = { NOT = { minorities_equal_rights = 1 } factor = 0 } }
	}
	option = {
		name = "EVTOPTB15501"		#Reject
		ai_chance = { factor = 1 modifier = { minorities_equal_rights = 1 factor = 0 } }
	}
}

country_event = {
	id = 15502
	title = "EVTNAME15502"
	desc = "EVTDESC15502"
	picture = "separation"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA15502"		
		all_core = { 
			limit = {
				owned_by = FROM
				has_province_modifier = promised_autonomy
			}
			secede_province = THIS
			remove_province_modifier = promised_autonomy
		} 
		ai_chance = {
			factor = 10
			modifier = { factor = 0 any_core = { is_core = FROM } }
		}
	}

	option = {
		name = "EVTOPTB15502"		# 
		all_core = { 
			limit = {
				owned_by = FROM
				has_province_modifier = promised_autonomy
			}
			remove_province_modifier = promised_autonomy
		} 
		ai_chance = {
			factor = 1
			modifier = { factor = 10 NOT = { any_core = { is_core = FROM } } }
		}		
	}
}

country_event = {
  id = 15503
  title = EVT_15503_NAME
  # EVT_15503_NAME;Demand Immediate Repay 1mil of WW2 War Dept!
  desc = EVT_15503_DESC
  # EVT_15503_DESC;$FROMCOUNTRY$ has large WW2 war debt bods owed by us. Some of these bonds are expiring. They demand repayment. 
  picture = "ww2_war_debt"
  is_triggered_only = yes

  option = {
    name = EVT_15503_A
	# EVT_15503_A;We have to repay!
	treasury = -1000000 
	change_variable = { which = ww2_war_debt value = 1 }
	relation = { who = FROM value = -10 }
	ai_chance = { factor = 1 }
  }
  
}

# If as a consequence of 15503 we are bancryot we have to give all countrie we previously denied independance independance.



